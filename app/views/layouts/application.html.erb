<!DOCTYPE html>
<html>
  <head>
    <title>Xuarani</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <meta name="turbo-prefetch" content="false">

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <link rel="icon" href="<%= asset_path 'favicon/favicon.ico' %>" type="image/x-icon">

    <!-- Driver.js CSS and JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@latest/dist/driver.css"/>
    <script src="https://cdn.jsdelivr.net/npm/driver.js@latest/dist/driver.js.iife.js"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>

  <body class="d-flex flex-column min-vh-100">
    <!-- NAVBAR según rol -->
    <% if user_signed_in? && current_user.has_role?(:administrador) %>
      <%= render "layouts/admin_navbar" %>
    <% elsif user_signed_in? && current_user.has_role?(:docente) %>
      <%= render "layouts/docente_navbar" %>
    <% elsif user_signed_in? %>
      <%= render "layouts/navbar" %> <!-- genérico para otros roles -->
    <% else %>
      <%= render "layouts/public_navbar" %>
    <% end %>

    <!-- Toast container (flotante arriba a la derecha) -->
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100">
      <%= render "layouts/flash" %>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="<%= content_for?(:layout_container_class) ? yield(:layout_container_class) : 'container py-4' %> flex-grow-1">
      <%= yield %>
    </main>

    <!-- FOOTER -->
    <%= render "layouts/footer" %>


  </body>
</html>
