<div class="container">
  <h1 class="mb-4 text-center">
    <i class="bi bi-building me-2 text-primary"></i>Organización Académica
  </h1>

  <!-- Tabs -->
  <ul class="nav nav-tabs justify-content-center" id="orgTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link active" data-bs-toggle="tab" href="#tab-turnos" role="tab">
        <i class="bi bi-clock-history me-1"></i> Turnos
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" data-bs-toggle="tab" href="#tab-cursos" role="tab">
        <i class="bi bi-journal-bookmark me-1"></i> Cursos
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" data-bs-toggle="tab" href="#tab-orientaciones" role="tab">
        <i class="bi bi-signpost-split me-1"></i> Orientaciones
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" data-bs-toggle="tab" href="#tab-ciclos" role="tab">
        <i class="bi bi-calendar-event me-1"></i> Ciclos Lectivos
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" data-bs-toggle="tab" href="#tab-divisiones" role="tab">
        <i class="bi bi-collection me-1"></i> Divisiones
      </a>
    </li>
  </ul>

  <div class="tab-content mt-4">

    <!-- TURNOS -->
    <div class="tab-pane fade show active" id="tab-turnos" role="tabpanel">
      <div class="row g-4">
        <div class="col-md-5">
          <% if can?(:create, Turno) %>
            <div class="card border-primary shadow-sm h-100">
              <div class="card-header bg-primary text-white">
                <i class="bi bi-plus-circle me-2"></i> Nuevo Turno
              </div>
              <div class="card-body">
                <%= render "turnos/form", turno: @turno %>
              </div>
            </div>
          <% end %>
        </div>
        <div class="col-md-7">
          <div class="card border-primary shadow-sm h-100">
            <div class="card-header bg-light fw-bold">
              <i class="bi bi-list-ul me-2"></i> Listado de Turnos
            </div>
            <div class="card-body">
              <%= render "turnos/list", turnos: @turnos %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CURSOS -->
    <div class="tab-pane fade" id="tab-cursos" role="tabpanel">
      <div class="row g-4">
        <div class="col-md-5">
          <% if can?(:create, Curso) %>
            <div class="card border-success shadow-sm h-100">
              <div class="card-header bg-success text-white">
                <i class="bi bi-plus-circle me-2"></i> Nuevo Curso
              </div>
              <div class="card-body">
                <%= render "cursos/form", curso: @curso %>
              </div>
            </div>
          <% end %>
        </div>
        <div class="col-md-7">
          <div class="card border-success shadow-sm h-100">
            <div class="card-header bg-light fw-bold">
              <i class="bi bi-list-ul me-2"></i> Listado de Cursos
            </div>
            <div class="card-body">
              <%= render "cursos/list", cursos: @cursos %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ORIENTACIONES -->
    <div class="tab-pane fade" id="tab-orientaciones" role="tabpanel">
      <div class="row g-4">
        <div class="col-md-5">
          <% if can?(:create, Orientacion) %>
            <div class="card border-info shadow-sm h-100">
              <div class="card-header bg-info text-white">
                <i class="bi bi-plus-circle me-2"></i> Nueva Orientación
              </div>
              <div class="card-body">
                <%= render "orientacions/form", orientacion: @orientacion %>
              </div>
            </div>
          <% end %>
        </div>
        <div class="col-md-7">
          <div class="card border-info shadow-sm h-100">
            <div class="card-header bg-light fw-bold">
              <i class="bi bi-list-ul me-2"></i> Listado de Orientaciones
            </div>
            <div class="card-body">
              <%= render "orientacions/list", orientacions: @orientacions %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CICLOS LECTIVOS -->
    <div class="tab-pane fade" id="tab-ciclos" role="tabpanel">
      <div class="row g-4">
        <div class="col-md-5">
          <% if can?(:create, CicloLectivo) %>
            <div class="card border-warning shadow-sm h-100">
              <div class="card-header bg-warning text-dark">
                <i class="bi bi-plus-circle me-2"></i> Nuevo Ciclo Lectivo
              </div>
              <div class="card-body">
                <%= render "ciclo_lectivos/form", ciclo_lectivo: @ciclo_lectivo %>
              </div>
            </div>
          <% end %>
        </div>
        <div class="col-md-7">
          <div class="card border-warning shadow-sm h-100">
            <div class="card-header bg-light fw-bold">
              <i class="bi bi-list-ul me-2"></i> Listado de Ciclos Lectivos
            </div>
            <div class="card-body">
              <%= render "ciclo_lectivos/list", ciclo_lectivos: @ciclo_lectivos %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- DIVISIONES -->
    <div class="tab-pane fade" id="tab-divisiones" role="tabpanel">
      <div class="row g-4">
        <div class="col-md-5">
          <% if can?(:create, Division) %>
            <div class="card border-danger shadow-sm h-100">
              <div class="card-header bg-danger text-white">
                <i class="bi bi-plus-circle me-2"></i> Nueva División
              </div>
              <div class="card-body">
                <%= render "divisions/form", division: @division %>
              </div>
            </div>
          <% end %>
        </div>
        <div class="col-md-7">
          <div class="card border-danger shadow-sm h-100">
            <div class="card-header bg-light fw-bold">
              <i class="bi bi-list-ul me-2"></i> Listado de Divisiones
            </div>
            <div class="card-body">
              <%= render "divisions/list", divisions: @divisions %>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- cierre del container -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let triggerTabList = [].slice.call(document.querySelectorAll('#orgTabs a'))
    let lastTab = localStorage.getItem("activeTab")

    // Restaura el tab guardado
    if (lastTab) {
      let tab = document.querySelector(`#orgTabs a[href="${lastTab}"]`)
      if (tab) new bootstrap.Tab(tab).show()
    }

    // Guarda el tab cuando cambias
    triggerTabList.forEach(tabEl => {
      tabEl.addEventListener('shown.bs.tab', function (event) {
        localStorage.setItem("activeTab", event.target.getAttribute("href"))
      })
    })
  })
</script>
